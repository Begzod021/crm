{% extends 'base.html' %}
{% load static %}
{% block static %}
<script src="https://code.highcharts.com/maps/highmaps.js"></script>
<script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">
<link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
<link rel="stylesheet" href="{% static 'assets/vendors/mdi/css/materialdesignicons.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/strelka.css' %}">
<style type="text/css">
  #container {
    height: 500px;
    min-width: 310px;
    max-width: 800px;
    margin: 0 auto;
}

.loading {
    margin-top: 10em;
    text-align: center;
    color: gray;
}
</style>

<script>
  (async () => {

    const topology = await fetch(
        'https://code.highcharts.com/mapdata/countries/uz/uz-all.topo.json'
    ).then(response => response.json());

    // Prepare demo data. The data is joined to map using value of 'hc-key'
    // property by default. See API docs for 'joinBy' for more info on linking
    // data and map.
    const data = [
        ['uz-fa', {{employe_country.4}}], ['uz-tk', {{employe_country.0}}], ['uz-an', {{employe_country.2}}], ['uz-ng', {{employe_country.6}}],
        ['uz-ji', {{employe_country.9}}], ['uz-si', {{employe_country.12}}], ['uz-ta', {{ employe_country.0 }}], ['uz-bu', {{employe_country.5}}],
        ['uz-kh', {{employe_country.7}}], ['uz-qr', {{employe_country.3}}], ['uz-nw', {{employe_country.11}}], ['uz-sa', {{employe_country.1}}],
        ['uz-qa', {{employe_country.8}}], ['uz-su', {{employe_country.10}}]
    ];

    // Create the chart
    Highcharts.mapChart('container', {
        chart: {
            map: topology
        },

        title: {
            text: 'Highcharts Maps basic demo'
        },

        subtitle: {
            text: 'Source map: <a href="http://code.highcharts.com/mapdata/countries/uz/uz-all.topo.json">Uzbekistan</a>'
        },

        mapNavigation: {
            enabled: true,
            buttonOptions: {
                verticalAlign: 'bottom'
            }
        },

        colorAxis: {
            min: 0
        },

        series: [{
            data: data,
            name: 'Users',
            states: {
                hover: {
                    color: '#BADA55'
                }
            },
            dataLabels: {
                enabled: true,
                format: '{point.name}'
            }
        }]
    });

})();
</script>


{% endblock static %}
{% block content %}
      <!-- ### $App Screen Content ### -->
      <main class="main-content bgc-grey-100">
        <div id="mainContent">
          <div class="row gap-20 masonry pos-r" style="position: relative; height: 1879.88px;">
            <div class="masonry-sizer col-md-6"></div>
            <div class="masonry-item  w-100" style="position: absolute; left: 0%; top: 0px;">
              <div class="row gap-20">
                <div class="col-lg-3 col-md-6">
                  <div class="card">
                      <div class="card-body">
                          <div class="stat-widget-five">
                              <div class="col-9">
                                <div class="d-flex align-items-center align-self-start">
                                  <h5 class="mb-0">{{ coursers.course_dollar }}</h5>
                                  {% if coursers.diff_dollar < "0" %}
                                  <p class="text-danger ml-2 mb-0 font-weight-medium">{{coursers.diff_dollar}}</p>
                                  <div class="col-3">
                                    <div class="icon-strelka icon-box-danger">
                                      <span class="mdi mdi-arrow-bottom-left icon-item"></span>
                                    </div>
                                  </div>
                                  {% else %}
                                  <p class="text-success ml-2 mb-0 font-weight-medium">{{ coursers.diff_dollar }}%</p>
                                  <div class="col-3">
                                    <div class="icon-strelka icon-box-success">
                                      <span class="mdi mdi-arrow-top-right icon-item"></span>
                                    </div>
                                  </div>
                                  {% endif %}
                                </div>
                                <div class="stat-heading">1 USD to UZS</div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>

              <div class="col-lg-3 col-md-6">
                  <div class="card">
                      <div class="card-body">
                          <div class="stat-widget-five">
                              <div class="stat-icon dib flat-color-2">
                                  <i class="pe-7s-cart"></i>
                              </div>
                              <div class="stat-content">
                                  <div class="text-left dib">
                                      <div class="stat-text"><span class="count">3435</span></div>
                                      <div class="stat-heading">Sales</div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>

              <div class="col-lg-3 col-md-6">
                  <div class="card">
                      <div class="card-body">
                          <div class="stat-widget-five">
                              <div class="stat-icon dib flat-color-3">
                                  <i class="pe-7s-browser"></i>
                              </div>
                              <div class="stat-content">
                                  <div class="text-left dib">
                                      <div class="stat-text"><span class="count">{{tasks.count}}</span></div>
                                      <div class="stat-heading">Tasks</div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>

              <div class="col-lg-3 col-md-6">
                  <div class="card">
                      <div class="card-body">
                          <div class="stat-widget-five">
                              <div class="stat-icon dib flat-color-4">
                                  <i class="pe-7s-users"></i>
                              </div>
                              <div class="stat-content">
                                  <div class="text-left dib">
                                      <div class="stat-text"><span class="count">{{ user_count }}</span></div>
                                      <div class="stat-heading">Users</div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              </div>
            </div>
            <div class="masonry-item col-12" style="position: absolute; left: 0%; top: 126px;">
              <!-- #Site Visits ==================== -->
              <div class="bd bgc-white">
                <div class="peers fxw-nw@lg+ ai-s">
                  <div class="peer peer-greed w-70p@lg+ w-100@lg- p-20">
                    <div class="layers">
                      <div class="layer w-100 mB-10">
                        <h6 class="lh-1">Site Visits</h6>
                        <div id="container"></div>
                      </div>
                    </div>
                  </div>
                  <div class="peer bdL p-20 w-30p@lg+ w-100p@lg-">
                    <div class="layers">
                      <div class="layer w-100">
                        <!-- Progress Bars -->
                        <div class="layers">
                          <div class="layer w-100">
                            <h5 class="mB-5"></h5>
                            <small class="fw-600 c-grey-700">My Tasks</small>
                            <span class="pull-right c-grey-600 fsz-sm">{{count_todos}}%</span>      
                            <div class="progress mT-10">
                              <div class="progress-bar bgc-deep-purple-500" role="progressbar" aria-valuenow="50"
                                aria-valuemin="0" aria-valuemax="100" style="width:{{count_todos}}%;"> <span class="sr-only">50%
                                  Complete</span></div>
                            </div>
                          </div>
                          <div class="layer w-100 mT-15">
                            <h5 class="mB-5">1M</h5>
                            <small class="fw-600 c-grey-700">Visitors From Europe</small>
                            <span class="pull-right c-grey-600 fsz-sm">80%</span>
                            <div class="progress mT-10">
                              <div class="progress-bar bgc-green-500" role="progressbar" aria-valuenow="50"
                                aria-valuemin="0" aria-valuemax="100" style="width:80%;"> <span class="sr-only">80%
                                  Complete</span></div>
                            </div>
                          </div>
                          <div class="layer w-100 mT-15">
                            <h5 class="mB-5">450k</h5>
                            <small class="fw-600 c-grey-700">Visitors From Australia</small>
                            <span class="pull-right c-grey-600 fsz-sm">40%</span>
                            <div class="progress mT-10">
                              <div class="progress-bar bgc-light-blue-500" role="progressbar" aria-valuenow="50"
                                aria-valuemin="0" aria-valuemax="100" style="width:40%;"> <span class="sr-only">40%
                                  Complete</span></div>
                            </div>
                          </div>
                          <div class="layer w-100 mT-15">
                            <h5 class="mB-5">1B</h5>
                            <small class="fw-600 c-grey-700">Visitors From India</small>
                            <span class="pull-right c-grey-600 fsz-sm">90%</span>
                            <div class="progress mT-10">
                              <div class="progress-bar bgc-blue-grey-500" role="progressbar" aria-valuenow="50"
                                aria-valuemin="0" aria-valuemax="100" style="width:90%;"> <span class="sr-only">90%
                                  Complete</span></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="masonry-item col-md-6" style="position: absolute; left: 50%; top: 658px;">
              <div class="bgc-white p-20 bd">
                <h6 class="c-grey-900">Bar Chart</h6>
                <div class="mT-30"><div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
                  <canvas id="bar-chart" height="542" width="740" style="display: block; width: 740px; height: 542px;" class="chartjs-render-monitor"></canvas>
                </div>
              </div>
            </div>
            <div class="masonry-item col-md-6" style="position: absolute; left: 50%; top: 712.875px;">
              <!-- #Todo ==================== -->
              {% if position1.position == "director" %}
              <div class="bd bgc-white p-20">
                <div class="layers">
                  <div class="layer w-100 mB-10">
                    <h6 class="lh-1">Todo List</h6>
                  </div>
                  <div class="layer w-100">
                    <ul class="list-task list-group" data-role="tasklist">
                      <li class="list-group-item bdw-0" data-role="task">
                        <div class="checkbox checkbox-circle checkbox-info peers ai-c">
                          <input type="checkbox" id="inputCall1" name="inputCheckboxesCall" class="peer">
                          <label for="inputCall1" class=" peers peer-greed js-sb ai-c">
                            <span class="peer peer-greed">Call John for Dinner</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item bdw-0" data-role="task">
                        <div class="checkbox checkbox-circle checkbox-info peers ai-c">
                          <input type="checkbox" id="inputCall2" name="inputCheckboxesCall" class="peer">
                          <label for="inputCall2" class=" peers peer-greed js-sb ai-c">
                            <span class="peer peer-greed">Book Boss Flight</span>
                            <span class="peer">
                              <span class="badge badge-pill fl-r badge-success lh-0 p-10">2 Days</span>
                            </span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item bdw-0" data-role="task">
                        <div class="checkbox checkbox-circle checkbox-info peers ai-c">
                          <input type="checkbox" id="inputCall3" name="inputCheckboxesCall" class="peer">
                          <label for="inputCall3" class=" peers peer-greed js-sb ai-c">
                            <span class="peer peer-greed">Hit the Gym</span>
                            <span class="peer">
                              <span class="badge badge-pill fl-r badge-danger lh-0 p-10">3 Minutes</span>
                            </span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item bdw-0" data-role="task">
                        <div class="checkbox checkbox-circle checkbox-info peers ai-c">
                          <input type="checkbox" id="inputCall4" name="inputCheckboxesCall" class="peer">
                          <label for="inputCall4" class=" peers peer-greed js-sb ai-c">
                            <span class="peer peer-greed">Give Purchase Report</span>
                            <span class="peer">
                              <span class="badge badge-pill fl-r badge-warning lh-0 p-10">not important</span>
                            </span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item bdw-0" data-role="task">
                        <div class="checkbox checkbox-circle checkbox-info peers ai-c">
                          <input type="checkbox" id="inputCall5" name="inputCheckboxesCall" class="peer">
                          <label for="inputCall5" class=" peers peer-greed js-sb ai-c">
                            <span class="peer peer-greed">Watch Game of Thrones Episode</span>
                            <span class="peer">
                              <span class="badge badge-pill fl-r badge-info lh-0 p-10">Tomorrow</span>
                            </span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item bdw-0" data-role="task">
                        <div class="checkbox checkbox-circle checkbox-info peers ai-c">
                          <input type="checkbox" id="inputCall6" name="inputCheckboxesCall" class="peer">
                          <label for="inputCall6" class=" peers peer-greed js-sb ai-c">
                            <span class="peer peer-greed">Give Purchase report</span>
                            <span class="peer">
                              <span class="badge badge-pill fl-r badge-success lh-0 p-10">Done</span>
                            </span>
                          </label>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              {% else %}
              <h1>YOU CANT SEE</h1>
              {% endif %}
            </div>
            <div class="masonry-item col-md-6" style="position: absolute; left: 50%; top: 1073.88px;">
              <!-- #Sales Report ==================== -->
              <div class="bd bgc-white">
                <div class="layers">
                  <div class="layer w-100 p-20">
                    <h6 class="lh-1">Sales Report</h6>
                  </div>
                  <div class="layer w-100">
                    <div class="bgc-light-blue-500 c-white p-20">
                      <div class="peers ai-c jc-sb gap-40">
                        <div class="peer peer-greed">
                          <h5>November 2017</h5>
                          <p class="mB-0">Sales Report</p>
                        </div>
                        <div class="peer">
                          <h3 class="text-right">$6,000</h3>
                        </div>
                      </div>
                    </div>
                    <div class="table-responsive p-20">
                      <table class="table">
                        <thead>
                          <tr>
                            <th class=" bdwT-0">Name</th>
                            <th class=" bdwT-0">Status</th>
                            <th class=" bdwT-0">Date</th>
                            <th class=" bdwT-0">Price</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td class="fw-600">Item #1 Name</td>
                            <td><span class="badge bgc-red-50 c-red-700 p-10 lh-0 tt-c badge-pill">Unavailable</span>
                            </td>
                            <td>Nov 18</td>
                            <td><span class="text-success">$12</span></td>
                          </tr>
                          <tr>
                            <td class="fw-600">Item #2 Name</td>
                            <td><span
                                class="badge bgc-deep-purple-50 c-deep-purple-700 p-10 lh-0 tt-c badge-pill">New</span>
                            </td>
                            <td>Nov 19</td>
                            <td><span class="text-info">$34</span></td>
                          </tr>
                          <tr>
                            <td class="fw-600">Item #3 Name</td>
                            <td><span class="badge bgc-pink-50 c-pink-700 p-10 lh-0 tt-c badge-pill">New</span></td>
                            <td>Nov 20</td>
                            <td><span class="text-danger">-$45</span></td>
                          </tr>
                          <tr>
                            <td class="fw-600">Item #4 Name</td>
                            <td><span
                                class="badge bgc-green-50 c-green-700 p-10 lh-0 tt-c badge-pill">Unavailable</span></td>
                            <td>Nov 21</td>
                            <td><span class="text-success">$65</span></td>
                          </tr>
                          <tr>
                            <td class="fw-600">Item #5 Name</td>
                            <td><span class="badge bgc-red-50 c-red-700 p-10 lh-0 tt-c badge-pill">Used</span></td>
                            <td>Nov 22</td>
                            <td><span class="text-success">$78</span></td>
                          </tr>
                          <tr>
                            <td class="fw-600">Item #6 Name</td>
                            <td><span class="badge bgc-orange-50 c-orange-700 p-10 lh-0 tt-c badge-pill">Used</span>
                            </td>
                            <td>Nov 23</td>
                            <td><span class="text-danger">-$88</span></td>
                          </tr>
                          <tr>
                            <td class="fw-600">Item #7 Name</td>
                            <td><span class="badge bgc-yellow-50 c-yellow-700 p-10 lh-0 tt-c badge-pill">Old</span></td>
                            <td>Nov 22</td>
                            <td><span class="text-success">$56</span></td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="ta-c bdT w-100 p-20">
                  <a href="http://symfonator.herokuapp.com/admin/dashboard#">Check all the sales</a>
                </div>
              </div>
            </div>
            <div class="masonry-item col-md-6" style="position: absolute; left: 0%; top: 1080.88px;">
              <!-- #Weather ==================== -->
              <div class="bd bgc-white p-20">
                <div class="layers">
                  <!-- Widget Title -->
                  <div class="layer w-100 mB-20">
                    <h6 class="lh-1">Weather</h6>
                  </div>

                  <!-- Today Weather -->
                  <div class="layer w-100">
                    <div class="peers ai-c jc-sb fxw-nw">
                      <div class="peer peer-greed">
                        <div class="layers">
                          <!-- Temprature -->
                          <div class="layer w-100">
                            <div class="peers fxw-nw ai-c">
                              <div class="peer mR-20">
                                <h3>{{ weather.temp }}<sup>o</sup>C</h3>
                              </div>
                              <div class="peer">
                                {% if weather.id >= 500 and weather.id <= 531 or weather.id >= 300 and weather.id <= 321  %}
                                <canvas class="sleet" width="44" height="44"></canvas>
                                {% elif weather.id == 800 %}
                                <canvas class="clear-day" width="44" height="44"></canvas>
                                {% elif weather.id >= 801 and weather.id <= 804 %}
                                <canvas class="partly-cloudy-day" width="44" height="44"></canvas>
                                {% elif weather.id >= 701 and weather.id <= 781  %}
                                <canvas class="cloudy" width="44" height="44"></canvas>
                                {% elif weather.id >= 600 and weather.id <= 622 %}
                                <canvas class="snow" width="44" height="44"></canvas>
                                {% endif %}
                              </div>
                            </div>
                          </div>

                          <!-- Condition -->
                          <div class="layer w-100">
                            <span class="fw-600 c-grey-600">{{ weather.description.title }}</span>
                          </div>
                        </div>
                      </div>
                      <div class="peer">
                        <div class="layers ai-fe">
                          <div class="layer">
                            <h5 class="mB-5">{{ weather.city_name }}</h5>
                          </div>
                          <div class="layer">
                            <span class="fw-600 c-grey-600">{{ employe.date }}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Today Weather Extended -->
                  <div class="layer w-100 mY-30">
                    <div class="layers bdB">
                      <div class="layer w-100 bdT pY-5">
                        <div class="peers ai-c jc-sb fxw-nw">
                          <div class="peer">
                            <span>Wind</span>
                          </div>
                          <div class="peer ta-r">
                            <span class="fw-600 c-grey-800">{{ weather.speed }}m/s</span>
                          </div>
                        </div>
                      </div>
                      <div class="layer w-100 bdT pY-5">
                        <div class="peers ai-c jc-sb fxw-nw">
                          <div class="peer">
                            <span>Sunrise</span>
                          </div>
                          <div class="peer ta-r">
                            <span class="fw-600 c-grey-800">05:00 AM</span>
                          </div>
                        </div>
                      </div>
                      <div class="layer w-100 bdT pY-5">
                        <div class="peers ai-c jc-sb fxw-nw">
                          <div class="peer">
                            <span>Pressure</span>
                          </div>
                          <div class="peer ta-r">
                            <span class="fw-600 c-grey-800">{{ weather.pressure_b }}B</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="masonry-item col-md-6" style="position: absolute; left: 0%; top: 1504.88px;">
            </div>
          </div>
        </div>
      </main>
      
{% endblock content %}